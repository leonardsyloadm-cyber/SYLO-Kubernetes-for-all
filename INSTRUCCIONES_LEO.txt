===================================================
üöÄ GU√çA DE INSTALACI√ìN SYLO - V4.0 (AI + ENTERPRISE)
===================================================

¬°Hola Leo! Esta versi√≥n incluye la arquitectura de SEGURIDAD (Calico)
y el nuevo CEREBRO DE IA (Ollama + Sylo Brain) para el soporte t√©cnico.

REQUISITOS PREVIOS:
- Docker Desktop instalado y corriendo.
- Python 3 instalado.
- Minikube instalado.
- OpenTofu (tofu) instalado.
- Kubectl instalado.
- OLLAMA instalado (Linux: curl -fsSL https://ollama.com/install.sh | sh)

---------------------------------------------------
PASO 0: LIMPIEZA DE RED (IPS INMORTALES)
---------------------------------------------------
Configura estas IPs en el c√≥digo para que Docker y Localhost se entiendan:

1. sylo-web/index.php             -> API_URL = "http://172.17.0.1:8001/api/clientes"
2. worker/sylo_brain.py           -> OLLAMA_URL = "http://172.17.0.1:11434/api/generate"
3. dashboard_cliente.php          -> API_URL_BASE = "http://172.17.0.1:8001/api/clientes"

*(Nota: 172.17.0.1 es la IP del Host desde Docker. Si falla, prueba host.docker.internal)*

---------------------------------------------------
PASO 1: PREPARAR OLLAMA (SOLO UNA VEZ)
---------------------------------------------------
Para que la IA funcione con Docker, hay que abrirla al mundo.

1. Edita el servicio de Ollama:
   $ sudo systemctl edit ollama.service

2. Pega ESTO (sin almohadillas #) en el hueco libre:
   [Service]
   Environment="OLLAMA_HOST=0.0.0.0"

3. Guarda (Ctrl+O) y Sal (Ctrl+X).

4. Aplica cambios y descarga el modelo:
   $ sudo systemctl daemon-reload
   $ sudo systemctl restart ollama
   $ ollama pull qwen2.5:1.5b

---------------------------------------------------
PASO 2: INSTALAR LIBRER√çAS PYTHON
---------------------------------------------------
1. Abre una terminal en la ra√≠z del proyecto.
2. Activa entorno:
   $ source venv/bin/activate
3. Instala todo:
   $ pip install fastapi uvicorn requests psutil mysql-connector-python

---------------------------------------------------
PASO 3: ARRANCAR INFRAESTRUCTURA BASE
---------------------------------------------------
1. En la ra√≠z del proyecto:
   $ docker-compose up -d --build

2. (Opcional) Si la web no conecta tras cambiar de WiFi:
   $ docker restart sylo-web

---------------------------------------------------
PASO 4: ARRANCAR LA API (EL N√öCLEO)
---------------------------------------------------
1. Abre TERMINAL 1 (API):
   $ source venv/bin/activate
   $ python3 Cerebro/api_sylo.py

   (Debe decir: "API Restaurada y Lista" en puerto 8001).

---------------------------------------------------
PASO 5: ARRANCAR SYLO BRAIN (LA IA)
---------------------------------------------------
Este script conecta el chat de la web con Ollama y la base de conocimientos.

1. Abre TERMINAL 2 (Cerebro):
   $ source venv/bin/activate
   $ python3 worker/sylo_brain.py

   (Debe decir: "Sylo Brain v20... Iniciado").

---------------------------------------------------
PASO 6: ARRANCAR EL ORQUESTADOR (EL CAPATAZ)
---------------------------------------------------
Despliega los Kubernetes, Calico y reglas de negocio.

1. Abre TERMINAL 3 (Orquestador):
   $ source venv/bin/activate
   $ sudo python3 worker/orchestrator_sylo.py

---------------------------------------------------
PASO 7: EL OPERADOR (MANTENIMIENTO)
---------------------------------------------------
Script V46 que gestiona estados y limpieza.

1. Abre TERMINAL 4 (Operador):
   $ source venv/bin/activate
   $ sudo python3 worker/operator_sylo.py

---------------------------------------------------
PASO 8: VERIFICACI√ìN FINAL
---------------------------------------------------
1. üåç WEB CLIENTE: http://localhost:8000/index.php
2. ü§ñ CHAT IA: Entra al Dashboard, escribe "hola" y verifica que responde.
   (Si responde r√°pido, es Python. Si tarda un poco y explica cosas, es Ollama).

¬°Sistema Completo Sylo Enterprise Listo! ‚òÅÔ∏èüëÆ‚Äç‚ôÇÔ∏èüß†